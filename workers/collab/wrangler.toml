name = "pwa-whiteboard-collab"
main = "src/index.ts"
compatibility_date = "2025-12-19"

# This worker is meant to be deployed separately from the frontend (GitHub Pages).
# It hosts the collaboration WebSocket endpoint and uses a Durable Object per board.

# Durable Object binding (one room per board)
[[durable_objects.bindings]]
name = "BOARD_ROOM"
class_name = "BoardRoom"

# Required when adding or changing Durable Object classes:
# The first deployment should use a new tag (e.g. "v1").
[[migrations]]
tag = "v1"
new_sqlite_classes = ["BoardRoom"]

[vars]
# Optional allowlist for Origin checks, comma-separated (e.g. "https://example.com,https://user.github.io").
ALLOWED_ORIGINS = ""
