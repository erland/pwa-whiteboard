name = "pwa-whiteboard-collab"
main = "src/index.ts"
compatibility_date = "2025-12-19"

# This worker is meant to be deployed separately from the frontend (Cloudflare Pages).
# It hosts the collaboration WebSocket endpoint and uses a Durable Object per board.

# Durable Object binding (one room per board)
[[durable_objects.bindings]]
name = "BOARD_ROOM"
class_name = "BoardRoom"

# Required when adding or changing Durable Object classes:
# The first deployment should use a new tag (e.g. "v1").
[[migrations]]
tag = "v1"
new_classes = ["BoardRoom"]

[vars]
# These are placeholders. Use `wrangler secret put ...` for sensitive values.
SUPABASE_URL = "https://YOUR_PROJECT_REF.supabase.co"
# Use `wrangler secret put SUPABASE_SERVICE_ROLE_KEY` (do NOT put the key here)
SUPABASE_SERVICE_ROLE_KEY = ""
# Optional, if you later use signed invite tokens
INVITE_SIGNING_SECRET = ""
# Optional allowlist for Origin checks, comma-separated (e.g. "https://example.com,https://staging.example.com")
ALLOWED_ORIGINS = ""
